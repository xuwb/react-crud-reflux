"use strict";define(function(t,e,a){var n=t("react"),c=(t("./crudBtn"),t("./dataRow")),r=n.createClass({displayName:"DataTable",getInitialState:function(){return{data:[]}},onTableBtnClick:function(t,e){var a=this.state.data;switch(t){case"modify":this.props.callbackParent(e);break;case"delete":var n=a.indexOf(e);-1!=n&&a.splice(n,1),this.setState({data:a})}},render:function(){var t=[];return this.state.data.forEach(function(e){t.push(n.createElement(c,{key:e.id,data:e,callbackParent:this.onTableBtnClick}))}.bind(this)),n.createElement("table",{className:"col-table",ref:"tableList"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("td",{width:"100"},"标题"),n.createElement("td",{width:"80"},"作者"),n.createElement("td",{width:"150"},"发布时间"),n.createElement("td",{width:"150"},"操作"))),n.createElement("tbody",null,t))},componentDidMount:function(){var t=this;$.ajax({type:"get",url:t.props.source,success:function(e){t.setState({data:e}),t.props.setLastId(parseInt(e[e.length-1].id))}})}});a.exports=r});